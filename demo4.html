<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<!--<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9">-->
	<title>Cascade demo</title>
</head>
<body>
	<p>
		<select id="ddlParent" data-child="ddlChild">
			<option value="">Show All</option>
			<option value="0">Option 0</option>
			<option value="1">Option 1</option>
			<option value="2">Option 2</option>
			<option value="3">Option 3</option>
			<option value="4">Option 4</option>
			<option value="5">Option 5</option>
			<option value="6">Option 6</option>
			<option value="7">Option 7</option>
			<option value="8">Option 8</option>
			<option value="9">Option 9</option>
		</select>
	</p>
	<p>
		<select id="ddlChild">
			<option data-fk="0" value="0-0">Option 0-0</option>
			<option data-fk="0" value="0-1">Option 0-1</option>
			<option data-fk="0" value="0-2">Option 0-2</option>
			<option data-fk="0" value="0-3">Option 0-3</option>
			<option data-fk="0" value="0-4">Option 0-4</option>
			<option data-fk="0" value="0-5">Option 0-5</option>
			<option data-fk="0" value="0-6">Option 0-6</option>
			<option data-fk="0" value="0-7">Option 0-7</option>
			<option data-fk="0" value="0-8">Option 0-8</option>
			<option data-fk="0" value="0-9">Option 0-9</option>
			<option data-fk="1" value="1-0">Option 1-0</option>
			<option data-fk="1" value="1-1">Option 1-1</option>
			<option data-fk="1" value="1-2">Option 1-2</option>
			<option data-fk="1" value="1-3">Option 1-3</option>
			<option data-fk="1" value="1-4">Option 1-4</option>
			<option data-fk="1" value="1-5">Option 1-5</option>
			<option data-fk="1" value="1-6">Option 1-6</option>
			<option data-fk="1" value="1-7">Option 1-7</option>
			<option data-fk="1" value="1-8">Option 1-8</option>
			<option data-fk="1" value="1-9">Option 1-9</option>
			<option data-fk="2" value="2-0">Option 2-0</option>
			<option data-fk="2" value="2-1">Option 2-1</option>
			<option data-fk="2" value="2-2">Option 2-2</option>
			<option data-fk="2" value="2-3">Option 2-3</option>
			<option data-fk="2" value="2-4">Option 2-4</option>
			<option data-fk="2" value="2-5">Option 2-5</option>
			<option data-fk="2" value="2-6">Option 2-6</option>
			<option data-fk="2" value="2-7">Option 2-7</option>
			<option data-fk="2" value="2-8">Option 2-8</option>
			<option data-fk="2" value="2-9">Option 2-9</option>
			<option data-fk="3" value="3-0">Option 3-0</option>
			<option data-fk="3" value="3-1">Option 3-1</option>
			<option data-fk="3" value="3-2">Option 3-2</option>
			<option data-fk="3" value="3-3">Option 3-3</option>
			<option data-fk="3" value="3-4">Option 3-4</option>
			<option data-fk="3" value="3-5">Option 3-5</option>
			<option data-fk="3" value="3-6">Option 3-6</option>
			<option data-fk="3" value="3-7">Option 3-7</option>
			<option data-fk="3" value="3-8">Option 3-8</option>
			<option data-fk="3" value="3-9">Option 3-9</option>
			<option data-fk="4" value="4-0">Option 4-0</option>
			<option data-fk="4" value="4-1">Option 4-1</option>
			<option data-fk="4" value="4-2">Option 4-2</option>
			<option data-fk="4" value="4-3">Option 4-3</option>
			<option data-fk="4" value="4-4">Option 4-4</option>
			<option data-fk="4" value="4-5">Option 4-5</option>
			<option data-fk="4" value="4-6">Option 4-6</option>
			<option data-fk="4" value="4-7">Option 4-7</option>
			<option data-fk="4" value="4-8">Option 4-8</option>
			<option data-fk="4" value="4-9">Option 4-9</option>
			<option data-fk="5" value="5-0">Option 5-0</option>
			<option data-fk="5" value="5-1">Option 5-1</option>
			<option data-fk="5" value="5-2">Option 5-2</option>
			<option data-fk="5" value="5-3">Option 5-3</option>
			<option data-fk="5" value="5-4">Option 5-4</option>
			<option data-fk="5" value="5-5">Option 5-5</option>
			<option data-fk="5" value="5-6">Option 5-6</option>
			<option data-fk="5" value="5-7">Option 5-7</option>
			<option data-fk="5" value="5-8">Option 5-8</option>
			<option data-fk="5" value="5-9">Option 5-9</option>
			<option data-fk="6" value="6-0">Option 6-0</option>
			<option data-fk="6" value="6-1">Option 6-1</option>
			<option data-fk="6" value="6-2">Option 6-2</option>
			<option data-fk="6" value="6-3">Option 6-3</option>
			<option data-fk="6" value="6-4">Option 6-4</option>
			<option data-fk="6" value="6-5">Option 6-5</option>
			<option data-fk="6" value="6-6">Option 6-6</option>
			<option data-fk="6" value="6-7">Option 6-7</option>
			<option data-fk="6" value="6-8">Option 6-8</option>
			<option data-fk="6" value="6-9">Option 6-9</option>
			<option data-fk="7" value="7-0">Option 7-0</option>
			<option data-fk="7" value="7-1">Option 7-1</option>
			<option data-fk="7" value="7-2">Option 7-2</option>
			<option data-fk="7" value="7-3">Option 7-3</option>
			<option data-fk="7" value="7-4">Option 7-4</option>
			<option data-fk="7" value="7-5">Option 7-5</option>
			<option data-fk="7" value="7-6">Option 7-6</option>
			<option data-fk="7" value="7-7">Option 7-7</option>
			<option data-fk="7" value="7-8">Option 7-8</option>
			<option data-fk="7" value="7-9">Option 7-9</option>
			<option data-fk="8" value="8-0">Option 8-0</option>
			<option data-fk="8" value="8-1">Option 8-1</option>
			<option data-fk="8" value="8-2">Option 8-2</option>
			<option data-fk="8" value="8-3">Option 8-3</option>
			<option data-fk="8" value="8-4">Option 8-4</option>
			<option data-fk="8" value="8-5">Option 8-5</option>
			<option data-fk="8" value="8-6">Option 8-6</option>
			<option data-fk="8" value="8-7">Option 8-7</option>
			<option data-fk="8" value="8-8">Option 8-8</option>
			<option data-fk="8" value="8-9">Option 8-9</option>
			<option data-fk="9" value="9-0">Option 9-0</option>
			<option data-fk="9" value="9-1">Option 9-1</option>
			<option data-fk="9" value="9-2">Option 9-2</option>
			<option data-fk="9" value="9-3">Option 9-3</option>
			<option data-fk="9" value="9-4">Option 9-4</option>
			<option data-fk="9" value="9-5">Option 9-5</option>
			<option data-fk="9" value="9-6">Option 9-6</option>
			<option data-fk="9" value="9-7">Option 9-7</option>
			<option data-fk="9" value="9-8">Option 9-8</option>
			<option data-fk="9" value="9-9">Option 9-9</option>
		</select>
	</p>
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script type="text/javascript">
		$(function() {
			$('[data-child]').each(function () {
				$(this).cascade();
			});
		});
		var cascades = [];
		(function ($) {
			$.fn.cascade = function(child) {
				return this.each(function() {
					var c=document.getElementById($(this).attr('data-child'));
					var o = {};
					o.ddl = $(this).attr('data-child');
					o.items = [];

					for(var i=0;i<c.options.length;i++) {
						var n = document.createElement('option');
						for(var e = 0; e < c.options[i].attributes.length; e++){
							n.setAttribute(c.options[i].attributes[e].name, c.options[i].attributes[e].nodeValue);
						}
						n.innerHTML = c.options[i].innerHTML;
						o.items.push(n);
					}
					//o.items=arr;
					cascades.push(o);
					
					//console.log(arr[0].innerHTML);
					
					$(this).change(function() {
						var child= document.getElementById($(this).attr('data-child'));
						child.innerHTML = '';
						var data = [];
						for(var i=0;i<cascades.length;i++) {
							if(cascades[i].ddl == $(this).attr('data-child'))
								data = cascades[i].items;
						}

						for(var i=0;i<data.length;i++){

							if(!$(data[i]).is('[data-fk]') || 
								$(data[i]).attr('data-fk') == $(this).val() || 
								$(this).val() == $(this).attr('data-default') || 
								$(data[i]).val() == '' || 
								$(this).val()=='' || 
								$(data[i]).val() == '-1' || 
								$(this).val() == '-1')
							
								child.appendChild(data[i]);

						}
						child.selectedIndex = 0;
					}).change();
					

				});
			};
		})(jQuery);
	</script>	
</body>
</html>